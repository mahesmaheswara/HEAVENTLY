<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HeaVenTly — Booked Vendors</title>
  <meta name="theme-color" content="#08d9ff" />
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Main CSS -->
  <link rel="stylesheet" href="assets/css/booked_vendor.css" />
  <link rel="icon" href="assets/img/icon/myevent_icon.png" />
</head>
<body>
  <!-- Decorative starfield (optional) -->
  <div id="starField" class="star-field" aria-hidden="true"></div>

  <!-- App wrapper -->
  <div class="app" role="application">

    <!-- SIDEBAR (IDENTIK STYLE DENGAN events.html) -->
    <aside id="sideNav" class="sidebar" aria-label="Sidebar">
      <div class="sb-brand">
        <img src="assets/img/icon/myevent_icon.png" alt="HeaVenTly" width="44" height="44" />
        <div class="sb-title">
          <div class="name">HeaVenTly</div>
          <div class="sub">Client • Dashboard</div>
        </div>
      </div>

      <nav class="sb-nav" role="navigation" aria-label="Primary navigation">
        <a class="sb-link" href="dashboard_client.html">
          <img src="assets/img/icon/dashboard_icon.png" alt="Dashboard" /><span>Home</span>
        </a>
        <a class="sb-link" href="events.html">
          <img src="assets/img/icon/myevent_icon.png" alt="Events" /><span>Events</span>
        </a>
        <a class="sb-link" href="vendors.html">
          <img src="assets/img/icon/vendor_icon.png" alt="Vendors" /><span>Vendors</span>
        </a>
        <!-- Tambahan: Booked (tetap gaya yang sama) -->
        <a class="sb-link active" href="booked_vendors.html">
          <img src="assets/img/icon/cart_icon.png" alt="Booked" /><span>Booked</span>
        </a>
        <a class="sb-link" href="messages.html">
          <img src="assets/img/icon/chatbot_icon.png" alt="Messages" /><span>Messages</span>
        </a>
        <a class="sb-link" href="settings.html">
          <img src="assets/img/icon/settings_icon.png" alt="Settings" /><span>Settings</span>
        </a>
      </nav>

      <div class="sb-foot">
        <a class="sb-link" href="signin.html" id="logoutBtn">
          <img src="assets/img/icon/logout_icon.png" alt="Logout" /><span>Log out</span>
        </a>
        <div class="pill">v0.2 • client</div>
      </div>
    </aside>

    <!-- Overlay for mobile sidebar -->
    <div id="sideNavOverlay" class="side-nav-overlay" data-action="close-sidenav" hidden></div>

    <!-- MAIN -->
    <main id="mainContent" class="content" role="main" aria-live="polite">

      <!-- TOPBAR (identik gaya dengan events.html) -->
      <header class="topbar" role="banner" aria-label="Header">
        <div class="left">
          <button id="menuToggle" class="menu-btn" aria-label="Toggle menu" aria-expanded="false">☰</button>
          <div class="page-title">
            <div class="title">Booked Vendors</div>
            <div class="subtitle">Kelola vendor yang sudah kamu tambahkan</div>
          </div>
        </div>

        <div class="right">
          <div class="search" role="search">
            <label for="qBooked" class="sr-only">Cari vendor</label>
            <input id="qBooked" class="input" type="search" placeholder="Cari vendor / kategori / lokasi" autocomplete="off" />
            <button id="btnSearch" class="btn" type="button" aria-label="Cari">Search</button>
            <button class="btn" id="btnManageAll" type="button" aria-label="Kelola semua">Manage All</button>
            <button class="btn btn-primary" id="btnProceed" type="button" aria-label="Lanjut ke perjanjian">Proceed</button>
          </div>
        </div>
      </header>

      <!-- FILTER BAR (opsional—placeholder, tidak auto aktif) -->
      <section class="filters" aria-label="Filter & Sort">
        <div class="row">
          <div class="filter-group">
            <label for="fCategory">Kategori</label>
            <select id="fCategory" class="select">
              <option value="">Semua</option>
              <option value="catering">Catering</option>
              <option value="decor">Decor</option>
              <option value="photo">Photography</option>
              <option value="entertainment">Entertainment/MC</option>
              <option value="venue">Venue</option>
              <option value="sound">Sound & Lighting</option>
              <option value="transport">Transport</option>
              <option value="other">Lainnya</option>
            </select>
          </div>
          <div class="filter-group">
            <label for="fLocation">Lokasi</label>
            <input id="fLocation" class="input" type="text" placeholder="Kota/Area" />
          </div>
          <div class="filter-group">
            <label for="fBudgetMin">Budget (min—max)</label>
            <div class="range-wrap">
              <input id="fBudgetMin" class="input small" type="number" placeholder="Min" />
              <span class="sep">—</span>
              <input id="fBudgetMax" class="input small" type="number" placeholder="Max" />
            </div>
          </div>
          <div class="filter-group">
            <label for="fSort">Urutkan</label>
            <select id="fSort" class="select">
              <option value="recent">Baru ditambahkan</option>
              <option value="price_low">Harga terendah</option>
              <option value="price_high">Harga tertinggi</option>
              <option value="rating">Rating</option>
              <option value="name">Nama</option>
            </select>
          </div>
          <div class="actions">
            <button id="btnApplyFilters" class="btn" type="button">Apply</button>
            <button id="btnClearFilters" class="btn ghost" type="button">Clear</button>
          </div>
        </div>

        <!-- Filter chips (dinamis oleh JS nanti) -->
        <div class="filters-bar">
          <div id="filterChips" class="chip-box"></div>
          <div class="filter-actions">
            <button id="btnResetAll" class="btn small ghost" type="button">Reset All</button>
          </div>
        </div>
      </section>

      <!-- CART SUMMARY / TOOLBAR -->
      <section class="summary card" aria-label="Ringkasan keranjang">
        <div class="summary-row">
          <div class="left">
            <div class="title">Keranjang</div>
            <div id="summaryCount" class="muted small">0 vendor</div>
          </div>
          <div class="right">
            <button id="btnSelectAll" class="btn small" type="button">Select All</button>
            <button id="btnDeselectAll" class="btn small ghost" type="button">Deselect</button>
            <button id="btnRemoveSelected" class="btn small ghost" type="button">Remove Selected</button>
            <button id="btnExportSelected" class="btn small" type="button">Export</button>
          </div>
        </div>
      </section>

      <!-- GRID LIST VENDOR (HYBRID CART VIEW) -->
      <section class="vendor-area" aria-label="Daftar vendor dalam cart">
        <div id="bookedGrid" class="vendor-grid" role="list">
          <!-- Cards injected by JS -->
        </div>

        <!-- EMPTY STATE -->
        <div id="emptyState" class="empty-state" hidden role="status" aria-live="polite">
          <img src="assets/img/empty/search_empty.svg" alt="" aria-hidden="true" />
          <h3>Keranjang kosong</h3>
          <p>Belum ada vendor yang ditambahkan. Kunjungi halaman <a href="vendors.html">Vendors</a> untuk menambahkan.</p>
          <div class="empty-actions">
            <a class="btn" href="vendors.html">Browse Vendors</a>
          </div>
        </div>

        <!-- PAGINATION (opsional) -->
        <nav id="pagination" class="pagination" role="navigation" aria-label="Pagination" hidden>
          <button class="btn ghost" id="pagePrev" type="button" aria-label="Sebelumnya" disabled>Prev</button>
          <ul id="pageList" class="page-list" role="list"></ul>
          <button class="btn ghost" id="pageNext" type="button" aria-label="Berikutnya" disabled>Next</button>
        </nav>
      </section>

      <!-- BULK ACTIONS BAR (sticky bottom when items selected) -->
      <aside id="bulkBar" class="bulk-bar" aria-live="polite" hidden>
        <div class="wrap">
          <div class="left">
            <div class="title">Dipilih: <span id="bulkCount">0</span></div>
            <div class="muted small">Pilih vendor untuk tindakan massal</div>
          </div>
          <div class="right">
            <button id="bulkNegotiate" class="btn" type="button">Negotiate</button>
            <button id="bulkConnect" class="btn" type="button">Connect to Event</button>
            <button id="bulkRemove" class="btn ghost" type="button">Remove</button>
          </div>
        </div>
      </aside>

      <!-- DRAWER: CONNECT TO EVENT -->
      <aside id="connectDrawer" class="drawer" aria-label="Hubungkan ke event" hidden>
        <header class="drawer-head">
          <div class="title">Connect to Event</div>
          <button class="btn ghost" data-close="connectDrawer" aria-label="Tutup">Close</button>
        </header>
        <div class="drawer-body">
          <div class="section">
            <label for="eventPicker">Pilih event</label>
            <select id="eventPicker" class="select">
              <option value="">— Pilih event —</option>
              <!-- Inject options by JS -->
            </select>
          </div>

          <div class="section">
            <div class="label">Vendor terpilih</div>
            <ul id="selectedVendorList" class="list">
              <!-- Inject selected vendors -->
            </ul>
          </div>

          <div class="section">
            <div class="label">Opsional</div>
            <label class="toggle"><input type="checkbox" id="toggleInviteChat" /> <span>Undang ke forum chat setelah vendor accept</span></label>
            <label class="toggle"><input type="checkbox" id="toggleRequestProposal" /> <span>Request proposal/quotation</span></label>
          </div>
        </div>
        <footer class="drawer-foot">
          <button id="btnSendConnect" class="btn btn-primary" type="button">Send Request</button>
        </footer>
      </aside>

      <!-- MODAL: MANAGE VENDOR (per vendor) -->
      <div id="manageModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="manageTitle" hidden>
        <div class="modal-box md">
          <header class="modal-head">
            <h3 id="manageTitle">Manage Vendor</h3>
            <button class="btn ghost" data-close="manageModal" aria-label="Tutup">Close</button>
          </header>
          <div class="modal-body">
            <div id="manageVendorMeta" class="muted">Nama • Kategori • Lokasi</div>

            <div class="tabs" role="tablist" aria-label="Manage tabs">
              <button class="tab active" data-tab="mgNotes" role="tab" aria-selected="true">Notes</button>
              <button class="tab" data-tab="mgFiles" role="tab">Attachments</button>
              <button class="tab" data-tab="mgOptions" role="tab">Options</button>
            </div>

            <section id="mgNotes" class="panel active" role="tabpanel">
              <label for="mgNoteText">Catatan</label>
              <textarea id="mgNoteText" class="input" rows="5" placeholder="Catatan untuk vendor ini..."></textarea>
              <div class="muted small" style="margin-top:6px">Catatan ini tersimpan lokal.</div>
            </section>

            <section id="mgFiles" class="panel" role="tabpanel" hidden>
              <input id="mgFileInput" type="file" multiple />
              <div id="mgFileList" class="attach-list"></div>
            </section>

            <section id="mgOptions" class="panel" role="tabpanel" hidden>
              <label class="toggle"><input type="checkbox" id="mgWishlist" /> <span>Tambahkan ke wishlist</span></label>
              <label class="toggle"><input type="checkbox" id="mgPriority" /> <span>Tandai sebagai prioritas</span></label>
            </section>
          </div>
          <footer class="modal-foot">
            <button id="mgSave" class="btn" type="button">Save</button>
            <button id="mgClose" class="btn ghost" data-close="manageModal" type="button">Close</button>
          </footer>
        </div>
      </div>

      <!-- MODAL: NEGOTIATION -->
      <div id="negoModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="negoTitle" hidden>
        <div class="modal-box md">
          <header class="modal-head">
            <h3 id="negoTitle">Negotiate</h3>
            <button class="btn ghost" data-close="negoModal" aria-label="Tutup">Close</button>
          </header>
          <div class="modal-body">
            <div id="negoVendorMeta" class="muted">Untuk: —</div>
            <label for="negoMessage">Pesan</label>
            <textarea id="negoMessage" class="input" rows="5" placeholder="Tuliskan detail negosiasi (kuota, harga, timeline, dsb.)"></textarea>
          </div>
          <footer class="modal-foot">
            <button id="negoSend" class="btn btn-primary" type="button">Send</button>
            <button class="btn ghost" data-close="negoModal" type="button">Cancel</button>
          </footer>
        </div>
      </div>

      <!-- MODAL: CONFIRM REMOVE -->
      <div id="removeModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="rmTitle" hidden>
        <div class="modal-box sm">
          <h3 id="rmTitle">Hapus vendor dari cart?</h3>
          <div id="rmMeta" class="muted">Vendor: —</div>
          <div class="modal-actions">
            <button id="rmOK" class="btn" type="button">Ya</button>
            <button class="btn ghost" data-close="removeModal" type="button">Batal</button>
          </div>
        </div>
      </div>

      <!-- MODAL: PROCEED (Agreement/Payment placeholder) -->
      <div id="proceedModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="pcTitle" hidden>
        <div class="modal-box lg">
          <header class="modal-head">
            <h3 id="pcTitle">Proceed to Agreement</h3>
            <button class="btn ghost" data-close="proceedModal" aria-label="Tutup">Close</button>
          </header>
          <div class="modal-body">
            <p class="muted">Sebelum melanjutkan, pastikan kamu sudah meninjau syarat kerjasama, opsi pembayaran (DP / Full), dan kontrak. Setelah disetujui, vendor akan otomatis diundang ke forum event (sesuai pengaturan).</p>

            <div class="section">
              <label for="pcPaymentType">Jenis pembayaran</label>
              <select id="pcPaymentType" class="select">
                <option value="">— pilih —</option>
                <option value="dp_30">DP 30%</option>
                <option value="dp_50">DP 50%</option>
                <option value="full">Full Payment</option>
                <option value="custom">Custom Agreement</option>
              </select>
            </div>

            <div class="section">
              <label for="pcNotes">Catatan / Agreement</label>
              <textarea id="pcNotes" class="input" rows="4" placeholder="Cantumkan ringkasan kesepakatan untuk kontrak..."></textarea>
            </div>
          </div>
          <footer class="modal-foot">
            <button id="pcProceed" class="btn btn-primary" type="button">Continue</button>
            <button class="btn ghost" data-close="proceedModal" type="button">Cancel</button>
          </footer>
        </div>
      </div>

      <!-- TOAST -->
      <div id="toast" class="toast" role="status" aria-live="polite" hidden></div>

      <!-- TEMPLATES -->
      <template id="vendorCardTemplate">
        <article class="vendor-card" role="listitem" data-id="">
          <header class="card-head">
            <label class="checkbox-compare" aria-label="Pilih vendor">
              <input type="checkbox" data-action="select" />
              <span class="sr-only">Select</span>
            </label>
            <button class="btn-icon wishlist" data-action="wishlist" aria-label="Tambah ke wishlist" aria-pressed="false">❤</button>
          </header>

          <a class="thumb" href="#" data-action="open-manage" aria-label="Kelola vendor">
            <img class="img" src="" alt="" loading="lazy" />
          </a>

          <div class="card-body">
            <div class="row">
              <a class="vendor-name" href="#" data-action="open-manage">Nama Vendor</a>
              <div class="rating" aria-label="Rating">★ 0.0</div>
            </div>
            <div class="meta">
              <span class="category">Kategori</span> • <span class="location">Lokasi</span>
            </div>
            <p class="desc muted">Ringkasan singkat…</p>
            <div class="price">
              <span class="label">Mulai</span>
              <span class="value">Rp —</span>
            </div>
          </div>

          <footer class="card-foot">
            <button class="btn ghost" data-action="negotiate" type="button">Negotiate</button>
            <button class="btn" data-action="connect" type="button">Connect</button>
            <button class="btn btn-primary" data-action="manage" type="button">Manage</button>
            <button class="btn danger" data-action="remove" type="button">Remove</button>
          </footer>
        </article>
      </template>

      <template id="skeletonCardTemplate">
        <article class="vendor-card skeleton" role="listitem" aria-hidden="true">
          <div class="sk-head"></div>
          <div class="sk-img"></div>
          <div class="sk-line lg"></div>
          <div class="sk-line"></div>
          <div class="sk-line sm"></div>
          <div class="sk-actions"></div>
        </article>
      </template>

      <template id="chipTemplate">
        <span class="chip" data-key=""><span class="text"></span><button class="chip-x" aria-label="Remove filter">×</button></span>
      </template>

      <template id="listItemTemplate">
        <li class="list-item"><span class="text">Item</span></li>
      </template>

    </main>
  </div>

  <!-- Icons (lucide optional if needed by JS later) -->
  <script src="https://unpkg.com/lucide@latest" defer></script>
  <!-- JS (tidak auto menjalankan apapun) -->
  <script src="assets/js/booked_vendors.js" defer></script>
</body>
</html>
